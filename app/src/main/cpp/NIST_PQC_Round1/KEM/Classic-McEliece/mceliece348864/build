#!/bin/sh

export CPATH="$CPATH:$HOME/include"
export LIBRARY_PATH="$LIBRARY_PATH:$HOME/lib"

for f in `echo $HOME/supercop-20171020/bench/* $HOME/supercop-20170904/bench/* $HOME/supercop-20190110/bench/*`
do
  [ -d "$f" ] && export CPATH="$CPATH:$f/include:$f/include/amd64"
  [ -d "$f" ] && export LIBRARY_PATH="$LIBRARY_PATH:$f/lib:$f/lib/amd64"
done

for f in `echo $HOME/supercop-data/*/amd64/include`
do
  [ -d "$f" ] && export CPATH="$CPATH:$f"
done

for f in `echo $HOME/supercop-data/*/amd64/lib`
do
  [ -d "$f" ] && export LIBRARY_PATH="$LIBRARY_PATH:$f"
done

gcc -O3 -march=native -mtune=native -Wall -I. -DKAT -DKATNUM=`cat KATNUM` -o kat nist/kat_kem.c nist/rng.c benes.c bm.c controlbits.c decrypt.c encrypt.c gf.c operations.c pk_gen.c root.c sk_gen.c synd.c transpose.c util.c     -lsupercop -lkeccak -lcrypto -ldl 
